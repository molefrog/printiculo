if(function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},i={},o=function(t,e){return{}.hasOwnProperty.call(t,e)},r=function(t,e){var i,o,r=[];i=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var n=0,s=i.length;s>n;n++)o=i[n],".."===o?r.pop():"."!==o&&""!==o&&r.push(o);return r.join("/")},n=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(i){var o=n(e),s=r(o,i);return t.require(s,e)}},a=function(t,e){var o={id:t,exports:{}};return i[t]=o,e(o.exports,s(t),o),o.exports},l=function(t,n){var s=r(t,".");if(null==n&&(n="/"),o(i,s))return i[s].exports;if(o(e,s))return a(s,e[s]);var l=r(s,"./index");if(o(i,l))return i[l].exports;if(o(e,l))return a(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+n+'"')},c=function(t,i){if("object"==typeof t)for(var r in t)o(t,r)&&(e[r]=t[r]);else e[t]=i},p=function(){var t=[];for(var i in e)o(e,i)&&t.push(i);return t};t.require=l,t.require.define=c,t.require.register=c,t.require.list=p,t.require.brunch=!0}}(),function(t){"use strict";var e=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),i=t.jsmpeg=function(t,e){e=e||{},this.benchmark=!!e.benchmark,this.canvas=e.canvas||document.createElement("canvas"),this.autoplay=!!e.autoplay,this.loop=!!e.loop,this.externalLoadCallback=e.onload||null,this.externalDecodeCallback=e.ondecodeframe||null,this.externalFinishedCallback=e.onfinished||null,this.bwFilter=e.bwFilter||!1,this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.canvasContext=this.canvas.getContext("2d"),t instanceof WebSocket?(this.client=t,this.client.onopen=this.initSocketClient.bind(this)):this.load(t)};i.prototype.waitForIntraFrame=!0,i.prototype.socketBufferSize=524288,i.prototype.onlostconnection=null,i.prototype.initSocketClient=function(){this.buffer=new P(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new P(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},i.prototype.decodeSocketHeader=function(t){t[0]==o.charCodeAt(0)&&t[1]==o.charCodeAt(1)&&t[2]==o.charCodeAt(2)&&t[3]==o.charCodeAt(3)&&(this.width=256*t[4]+t[5],this.height=256*t[6]+t[7],this.initBuffers())},i.prototype.receiveSocketMessage=function(t){var i=new Uint8Array(t.data);this.sequenceStarted||this.decodeSocketHeader(i);var o=this.buffer,n=this.nextPictureBuffer;n.writePos+i.length>n.length&&(n.lastWriteBeforeWrap=n.writePos,n.writePos=0,n.index=0),n.bytes.set(i,n.writePos),n.writePos+=i.length;for(var s=0;;){if(s=n.findNextMPEGStartCode(),s==P.NOT_FOUND||n.index>>3>n.writePos)return void(n.index=Math.max(n.writePos-3,0)<<3);if(s==$)break}if(this.waitForIntraFrame)return n.advance(10),void(n.getBits(3)==b&&(this.waitForIntraFrame=!1,n.chunkBegin=n.index-13>>3));this.currentPictureDecoded||this.decodePicture(r);var a=n.index>>3;if(a>n.chunkBegin)o.bytes.set(n.bytes.subarray(n.chunkBegin,a)),o.writePos=a-n.chunkBegin;else{o.bytes.set(n.bytes.subarray(n.chunkBegin,n.lastWriteBeforeWrap));var l=n.lastWriteBeforeWrap-n.chunkBegin;o.bytes.set(n.bytes.subarray(0,a),l),o.writePos=a+l}o.index=0,n.chunkBegin=a,this.currentPictureDecoded=!1,e(this.scheduleDecoding.bind(this),this.canvas)},i.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},i.prototype.isRecording=!1,i.prototype.recorderWaitForIntraFrame=!1,i.prototype.recordedFrames=0,i.prototype.recordedSize=0,i.prototype.didStartRecordingCallback=null,i.prototype.recordBuffers=[],i.prototype.canRecord=function(){return this.client&&this.client.readyState==this.client.OPEN},i.prototype.startRecording=function(t){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=t||null,this.recordedFrames=0,this.recordedSize=0;var e=this.width>>4,i=(15&this.width)<<4|this.height>>8,o=255&this.height;this.recordBuffers.push(new Uint8Array([0,0,1,179,e,i,o,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},i.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!=b)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},i.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},i.prototype.stopRecording=function(){var t=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,t},i.prototype.load=function(t){this.url=t;var e=new XMLHttpRequest,i=this;e.onreadystatechange=function(){e.readyState==e.DONE&&200==e.status&&i.loadCallback(e.response)},e.onprogress=this.updateLoader.bind(this),e.open("GET",t),e.responseType="arraybuffer",e.send()},i.prototype.updateLoader=function(t){var e=t.loaded/t.total,i=this.canvas.width,o=this.canvas.height,r=this.canvasContext;r.fillStyle="#222",r.fillRect(0,0,i,o),r.fillStyle="#fff",r.fillRect(0,o-o*e,i,o*e)},i.prototype.loadCallback=function(t){Date.now();this.buffer=new P(t),this.findStartCode(C),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this)},i.prototype.play=function(){this.playing||(this.targetTime=Date.now(),this.playing=!0,this.scheduleNextFrame())},i.prototype.pause=function(){this.playing=!1},i.prototype.stop=function(){this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.playing=!1,this.client&&(this.client.close(),this.client=null)},i.prototype.readCode=function(t){var e=0;do e=t[e+this.buffer.getBits(1)];while(e>=0&&0!=t[e]);return t[e+2]},i.prototype.findStartCode=function(t){for(var e=0;;)if(e=this.buffer.findNextMPEGStartCode(),e==t||e==P.NOT_FOUND)return e;return P.NOT_FOUND},i.prototype.fillArray=function(t,e){for(var i=0,o=t.length;o>i;i++)t[i]=e},i.prototype.pictureRate=30,i.prototype.lateTime=0,i.prototype.firstSequenceHeader=0,i.prototype.targetTime=0,i.prototype.nextFrame=function(){if(this.buffer)for(;;){var t=this.buffer.findNextMPEGStartCode();if(t==C)this.decodeSequenceHeader();else{if(t==$)return this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.canvas;if(t==P.NOT_FOUND)return this.stop(),this.this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null}}},i.prototype.scheduleNextFrame=function(){this.lateTime=Date.now()-this.targetTime;var t=Math.max(0,1e3/this.pictureRate-this.lateTime);if(this.targetTime=Date.now()+t,this.benchmark){var e=Date.now();this.benchframe||(this.benchstart=e,this.benchframe=0),this.benchframe++;var i=e-this.benchstart;this.benchframe>=100&&(this.benchfps=this.benchframe/i*1e3,console&&console.log("frames per second: "+this.benchfps),this.benchframe=null),setTimeout(this.nextFrame.bind(this),0)}else 18>t?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),t)},i.prototype.scheduleAnimation=function(){e(this.nextFrame.bind(this),this.canvas)},i.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=n[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers(),this.buffer.getBits(1)){for(var t=0;64>t;t++)this.customIntraQuantMatrix[s[t]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var t=0;64>t;t++)this.customNonIntraQuantMatrix[s[t]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},i.prototype.initBuffers=function(){if(this.intraQuantMatrix=a,this.nonIntraQuantMatrix=l,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var e=t.Uint8ClampedArray||t.Uint8Array;t.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new e(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new e(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new e(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new e(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new e(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new e(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height,this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.bwFilter&&(this.currentRGBA32=new Uint32Array(this.currentRGBA.data.buffer)),this.fillArray(this.currentRGBA.data,255)}},i.prototype.currentY=null,i.prototype.currentCr=null,i.prototype.currentCb=null,i.prototype.currentRGBA=null,i.prototype.pictureCodingType=0,i.prototype.forwardY=null,i.prototype.forwardCr=null,i.prototype.forwardCb=null,i.prototype.fullPelForward=!1,i.prototype.forwardFCode=0,i.prototype.forwardRSize=0,i.prototype.forwardF=0,i.prototype.decodePicture=function(t){if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=_)){if(this.pictureCodingType==w){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0==this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var e=0;do e=this.buffer.findNextMPEGStartCode();while(e==T||e==j);for(;e>=x&&k>=e;)this.decodeSlice(255&e),e=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),t!=r&&(this.bwFilter?this.YToRGBA():this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType==b||this.pictureCodingType==w){var i=this.forwardY,o=this.forwardY32,n=this.forwardCr,s=this.forwardCr32,a=this.forwardCb,l=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=i,this.currentY32=o,this.currentCr=n,this.currentCr32=s,this.currentCb=a,this.currentCb32=l}}},i.prototype.YCbCrToRGBA=function(){for(var t,e,i,o,r,n,s=this.currentY,a=this.currentCb,l=this.currentCr,c=this.currentRGBA.data,p=0,h=this.codedWidth,u=this.codedWidth+(this.codedWidth-this.width),d=0,f=this.halfWidth-(this.width>>1),m=0,v=4*this.width,y=4*this.width,g=this.width>>1,b=this.height>>1,w=0;b>w;w++){for(var _=0;g>_;_++)e=a[d],i=l[d],d++,o=i+(103*i>>8)-179,r=(88*e>>8)-44+(183*i>>8)-91,n=e+(198*e>>8)-227,t=s[p++],c[m]=t+o,c[m+1]=t-r,c[m+2]=t+n,m+=4,t=s[p++],c[m]=t+o,c[m+1]=t-r,c[m+2]=t+n,m+=4,t=s[h++],c[v]=t+o,c[v+1]=t-r,c[v+2]=t+n,v+=4,t=s[h++],c[v]=t+o,c[v+1]=t-r,c[v+2]=t+n,v+=4;p+=u,h+=u,m+=y,v+=y,d+=f}},i.prototype.YToRGBA=function(){for(var t,e=this.currentY,i=this.currentRGBA32,o=0,r=this.codedWidth-this.width,n=0,s=this.width,a=this.height,l=0;a>l;l++){for(var c=0;s>c;c++)t=e[o++],i[n++]=4278190080|t<<16|t<<8|t;o+=r}},i.prototype.quantizerScale=0,i.prototype.sliceBegin=!1,i.prototype.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},i.prototype.macroblockAddress=0,i.prototype.mbRow=0,i.prototype.mbCol=0,i.prototype.macroblockType=0,i.prototype.macroblockIntra=!1,i.prototype.macroblockMotFw=!1,i.prototype.motionFwH=0,i.prototype.motionFwV=0,i.prototype.motionFwHPrev=0,i.prototype.motionFwVPrev=0,i.prototype.decodeMacroblock=function(){for(var t=0,e=this.readCode(p);34==e;)e=this.readCode(p);for(;35==e;)t+=33,e=this.readCode(p);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType==w&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(S[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var i=0!=(2&this.macroblockType)?this.readCode(f):this.macroblockIntra?63:0,o=0,r=32;6>o;o++)0!=(i&r)&&this.decodeBlock(o),r>>=1},i.prototype.decodeMotionVectors=function(){var t,e,i=0;this.macroblockMotFw?(t=this.readCode(m),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),t=this.readCode(m),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType==w&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},i.prototype.copyMacroblock=function(t,e,i,o,r){var n,s,a,l,c,p,h,u,d,f=this.currentY32,m=this.currentCb32,v=this.currentCr32;n=this.codedWidth,s=n-16,a=t>>1,l=e>>1,c=1==(1&t),p=1==(1&e),h=((this.mbRow<<4)+l)*n+(this.mbCol<<4)+a,u=this.mbRow*n+this.mbCol<<2,d=u+(n<<2);var y,g,b;if(c)if(p)for(;d>u;){y=i[h]+i[h+n],h++;for(var w=0;4>w;w++)g=i[h]+i[h+n],h++,b=y+g+2>>2&255,y=i[h]+i[h+n],h++,b|=y+g+2<<6&65280,g=i[h]+i[h+n],h++,b|=y+g+2<<14&16711680,y=i[h]+i[h+n],h++,b|=y+g+2<<22&4278190080,f[u++]=b;u+=s>>2,h+=s-1}else for(;d>u;){y=i[h++];for(var w=0;4>w;w++)g=i[h++],b=y+g+1>>1&255,y=i[h++],b|=y+g+1<<7&65280,g=i[h++],b|=y+g+1<<15&16711680,y=i[h++],b|=y+g+1<<23&4278190080,f[u++]=b;u+=s>>2,h+=s-1}else if(p)for(;d>u;){for(var w=0;4>w;w++)b=i[h]+i[h+n]+1>>1&255,h++,b|=i[h]+i[h+n]+1<<7&65280,h++,b|=i[h]+i[h+n]+1<<15&16711680,h++,b|=i[h]+i[h+n]+1<<23&4278190080,h++,f[u++]=b;u+=s>>2,h+=s}else for(;d>u;){for(var w=0;4>w;w++)b=i[h],h++,b|=i[h]<<8,h++,b|=i[h]<<16,h++,b|=i[h]<<24,h++,f[u++]=b;u+=s>>2,h+=s}if(!this.bwFilter){n=this.halfWidth,s=n-8,a=t/2>>1,l=e/2>>1,c=1==(t/2&1),p=1==(e/2&1),h=((this.mbRow<<3)+l)*n+(this.mbCol<<3)+a,u=this.mbRow*n+this.mbCol<<1,d=u+(n<<1);var _,C,x,k,$,T;if(c)if(p)for(;d>u;){_=o[h]+o[h+n],k=r[h]+r[h+n],h++;for(var w=0;2>w;w++)C=o[h]+o[h+n],$=r[h]+r[h+n],h++,x=_+C+2>>2&255,T=k+$+2>>2&255,_=o[h]+o[h+n],k=r[h]+r[h+n],h++,x|=_+C+2<<6&65280,T|=k+$+2<<6&65280,C=o[h]+o[h+n],$=r[h]+r[h+n],h++,x|=_+C+2<<14&16711680,T|=k+$+2<<14&16711680,_=o[h]+o[h+n],k=r[h]+r[h+n],h++,x|=_+C+2<<22&4278190080,T|=k+$+2<<22&4278190080,v[u]=x,m[u]=T,u++;u+=s>>2,h+=s-1}else for(;d>u;){_=o[h],k=r[h],h++;for(var w=0;2>w;w++)C=o[h],$=r[h++],x=_+C+1>>1&255,T=k+$+1>>1&255,_=o[h],k=r[h++],x|=_+C+1<<7&65280,T|=k+$+1<<7&65280,C=o[h],$=r[h++],x|=_+C+1<<15&16711680,T|=k+$+1<<15&16711680,_=o[h],k=r[h++],x|=_+C+1<<23&4278190080,T|=k+$+1<<23&4278190080,v[u]=x,m[u]=T,u++;u+=s>>2,h+=s-1}else if(p)for(;d>u;){for(var w=0;2>w;w++)x=o[h]+o[h+n]+1>>1&255,T=r[h]+r[h+n]+1>>1&255,h++,x|=o[h]+o[h+n]+1<<7&65280,T|=r[h]+r[h+n]+1<<7&65280,h++,x|=o[h]+o[h+n]+1<<15&16711680,T|=r[h]+r[h+n]+1<<15&16711680,h++,x|=o[h]+o[h+n]+1<<23&4278190080,T|=r[h]+r[h+n]+1<<23&4278190080,h++,v[u]=x,m[u]=T,u++;u+=s>>2,h+=s}else for(;d>u;){for(var w=0;2>w;w++)x=o[h],T=r[h],h++,x|=o[h]<<8,T|=r[h]<<8,h++,x|=o[h]<<16,T|=r[h]<<16,h++,x|=o[h]<<24,T|=r[h]<<24,h++,v[u]=x,m[u]=T,u++;u+=s>>2,h+=s}}},i.prototype.dcPredictorY,i.prototype.dcPredictorCr,i.prototype.dcPredictorCb,i.prototype.blockData=null,i.prototype.decodeBlock=function(t){var e,i=0;if(this.fillArray(this.blockData,0),this.macroblockIntra){var o,r;if(4>t?(o=this.dcPredictorY,r=this.readCode(v)):(o=4==t?this.dcPredictorCr:this.dcPredictorCb,r=this.readCode(y)),r>0){var n=this.buffer.getBits(r);this.blockData[0]=0!=(n&1<<r-1)?o+n:o+(-1<<r|n+1)}else this.blockData[0]=o;4>t?this.dcPredictorY=this.blockData[0]:4==t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,i=1}else e=this.nonIntraQuantMatrix;for(var a=0;;){var l=0,p=this.readCode(g);if(1==p&&i>0&&0==this.buffer.getBits(1))break;65535==p?(l=this.buffer.getBits(6),a=this.buffer.getBits(8),0==a?a=this.buffer.getBits(8):128==a?a=this.buffer.getBits(8)-256:a>128&&(a-=256)):(l=p>>8,a=255&p,this.buffer.getBits(1)&&(a=-a)),i+=l;var h=s[i];i++,a<<=1,this.macroblockIntra||(a+=0>a?-1:1),a=a*this.quantizerScale*e[h]>>4,0==(1&a)&&(a-=a>0?1:-1),a>2047?a=2047:-2048>a&&(a=-2048),this.blockData[h]=a*c[h]}1==i?this.fillArray(this.blockData,this.blockData[0]+128>>8):this.IDCT();var u,d,f;4>t?(u=this.currentY,f=this.codedWidth-8,d=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&t)&&(d+=8),0!=(2&t)&&(d+=this.codedWidth<<3)):(u=4==t?this.currentCb:this.currentCr,f=(this.codedWidth>>1)-8,d=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),i=0;this.blockData;this.macroblockIntra?this.copyBlockToDestination(this.blockData,u,d,f):this.addBlockToDestination(this.blockData,u,d,f)},i.prototype.copyBlockToDestination=function(t,e,i,o){for(var r=0,n=0;8>n;n++){for(var s=0;8>s;s++)e[i++]=t[r++];i+=o}},i.prototype.addBlockToDestination=function(t,e,i,o){for(var r=0,n=0;8>n;n++){for(var s=0;8>s;s++)e[i++]+=t[r++];i+=o}},i.prototype.copyBlockToDestinationClamp=function(t,e,i,o){for(var r=0,n=0;8>n;n++){for(var s=0;8>s;s++){var a=t[r++];e[i++]=a>255?255:0>a?0:a}i+=o}},i.prototype.addBlockToDestinationClamp=function(t,e,i,o){for(var r=0,n=0;8>n;n++){for(var s=0;8>s;s++){var a=t[r++]+e[i];e[i++]=a>255?255:0>a?0:a}i+=o}},i.prototype.IDCT=function(){var t,e,i,o,r,n,s,a,l,c,p,h,u,d,f,m,v,y,g,b=this.blockData;for(g=0;8>g;++g)t=b[32+g],e=b[16+g]+b[48+g],i=b[40+g]-b[24+g],n=b[8+g]+b[56+g],s=b[24+g]+b[40+g],o=b[8+g]-b[56+g],r=n+s,a=b[0+g],u=(473*o-196*i+128>>8)-r,l=u-(362*(n-s)+128>>8),c=a-t,p=(362*(b[16+g]-b[48+g])+128>>8)-e,h=a+t,d=c+p,f=h+e,m=c-p,v=h-e,y=-l-(473*i+196*o+128>>8),b[0+g]=r+f,b[8+g]=u+d,b[16+g]=m-l,b[24+g]=v-y,b[32+g]=v+y,b[40+g]=l+m,b[48+g]=d-u,b[56+g]=f-r;for(g=0;64>g;g+=8)t=b[4+g],e=b[2+g]+b[6+g],i=b[5+g]-b[3+g],n=b[1+g]+b[7+g],s=b[3+g]+b[5+g],o=b[1+g]-b[7+g],r=n+s,a=b[0+g],u=(473*o-196*i+128>>8)-r,l=u-(362*(n-s)+128>>8),c=a-t,p=(362*(b[2+g]-b[6+g])+128>>8)-e,h=a+t,d=c+p,f=h+e,m=c-p,v=h-e,y=-l-(473*i+196*o+128>>8),b[0+g]=r+f+128>>8,b[1+g]=u+d+128>>8,b[2+g]=m-l+128>>8,b[3+g]=v-y+128>>8,b[4+g]=v+y+128>>8,b[5+g]=l+m+128>>8,b[6+g]=d-u+128>>8,b[7+g]=f-r+128>>8};var o="jsmp",r=1,n=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],s=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),l=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),c=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),p=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),h=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),u=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),d=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),f=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),m=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),v=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),y=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),g=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),b=1,w=2,_=3,C=179,x=1,k=175,$=0,T=181,j=178,S=[null,h,u,d],P=function(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};P.NOT_FOUND=-1,P.prototype.findNextMPEGStartCode=function(){for(var t=this.index+7>>3;t<this.writePos;t++)if(0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2])return this.index=t+4<<3,this.bytes[t+3];return this.index=this.writePos<<3,P.NOT_FOUND},P.prototype.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2]},P.prototype.nextBits=function(t){var e=this.index>>3,i=8-this.index%8;if(i>=t)return this.bytes[e]>>i-t&255>>8-t;var o=(this.index+t)%8,r=this.index+t-1>>3,n=this.bytes[e]&255>>8-i;for(e++;r>e;e++)n<<=8,n|=this.bytes[e];return o>0?(n<<=o,n|=this.bytes[e]>>8-o):(n<<=8,n|=this.bytes[e]),n},P.prototype.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},P.prototype.advance=function(t){return this.index+=t},P.prototype.rewind=function(t){return this.index-=t}}(window),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one(t.support.transition.end,function(){i=!0});var r=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){n.trigger("closed.bs.alert").remove()}var o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var n=t(r);e&&e.preventDefault(),n.length||(n=o.hasClass("alert")?o:o.parent()),n.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one(t.support.transition.end,i).emulateTransitionEnd(150):i())};var o=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var o=t(this),r=o.data("bs.alert");r||o.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(o)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),+function(t){"use strict";var e=function(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,o),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",o=this.$element,r=o.is("input")?"val":"html",n=o.data();e+="Text",n.resetText||o.data("resetText",o[r]()),o[r](n[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var o=t(this),r=o.data("bs.button"),n="object"==typeof i&&i;r||o.data("bs.button",r=new e(this,n)),"toggle"==i?r.toggle():i&&r.setState(i)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle"),e.preventDefault()})}(jQuery),+function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var i=this,o=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):o==e?this.pause().cycle():this.slide(e>o?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),r=i||o[e](),n=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}if(r.hasClass("active"))return this.sliding=!1;var c=t.Event("slide.bs.carousel",{relatedTarget:r[0],direction:s});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,n&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);
e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,o.addClass(s),r.addClass(s),o.one(t.support.transition.end,function(){r.removeClass([e,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*o.css("transition-duration").slice(0,-1))):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),n&&this.cycle(),this)};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var o=t(this),r=o.data("bs.carousel"),n=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i),s="string"==typeof i?i:n.slide;r||o.data("bs.carousel",r=new e(this,n)),"number"==typeof i?r.to(i):s?r[s]():n.interval&&r.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,o=t(this),r=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),n=t.extend({},r.data(),o.data()),s=o.attr("data-slide-to");s&&(n.interval=!1),r.carousel(n),(s=o.attr("data-slide-to"))&&r.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){"use strict";var e=function(i,o){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,o),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var o=i.data("bs.collapse");if(o&&o.transitioning)return;i.collapse("hide"),o||i.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var n=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return n.call(this);var s=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one(t.support.transition.end,t.proxy(o,this)).emulateTransitionEnd(350):o.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var o=t(this),r=o.data("bs.collapse"),n=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);!r&&n.toggle&&"show"==i&&(i=!i),r||o.data("bs.collapse",r=new e(this,n)),"string"==typeof i&&r[i]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var i,o=t(this),r=o.attr("data-target")||e.preventDefault()||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),n=t(r),s=n.data("bs.collapse"),a=s?"toggle":o.data(),l=o.attr("data-parent"),c=l&&t(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(o).addClass("collapsed"),o[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),n.collapse(a)})}(jQuery),+function(t){"use strict";function e(e){t(o).remove(),t(r).each(function(){var o=i(t(this)),r={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||o.removeClass("open").trigger("hidden.bs.dropdown",r))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}var o=".dropdown-backdrop",r="[data-toggle=dropdown]",n=function(e){t(e).on("click.bs.dropdown",this.toggle)};n.prototype.toggle=function(o){var r=t(this);if(!r.is(".disabled, :disabled")){var n=i(r),s=n.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(n.trigger(o=t.Event("show.bs.dropdown",a)),o.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",a),r.focus()}return!1}},n.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var n=i(o),s=n.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&n.find(r).focus(),o.click();var a=" li:not(.divider):visible a",l=n.find("[role=menu]"+a+", [role=listbox]"+a);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",n.prototype.keydown)}(jQuery),+function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show().scrollTop(0),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$element.find(".modal-dialog").one(t.support.transition.end,function(){i.$element.focus().trigger(r)}).emulateTransitionEnd(300):i.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var i=t.fn.modal;t.fn.modal=function(i,o){return this.each(function(){var r=t(this),n=r.data("bs.modal"),s=t.extend({},e.DEFAULTS,r.data(),"object"==typeof i&&i);n||r.data("bs.modal",n=new e(this,s)),"string"==typeof i?n[i](o):s.show&&n.show(o)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),o=i.attr("href"),r=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),n=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&e.preventDefault(),r.modal(n,this).one("hide",function(){i.is(":visible")&&i.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o);for(var r=this.options.trigger.split(" "),n=r.length;n--;){var s=r[n];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this,o=this.tip();this.setContent(),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,s=n.test(r);s&&(r=r.replace(n,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var a=this.getPosition(),l=o[0].offsetWidth,c=o[0].offsetHeight;if(s){var p=this.$element.parent(),h=r,u=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:p.outerWidth(),f="body"==this.options.container?window.innerHeight:p.outerHeight(),m="body"==this.options.container?0:p.offset().left;r="bottom"==r&&a.top+a.height+c-u>f?"top":"top"==r&&a.top-u-c<0?"bottom":"right"==r&&a.right+l>d?"left":"left"==r&&a.left-l<m?"right":r,o.removeClass(h).addClass(r)}var v=this.getCalculatedOffset(r,a,l,c);this.applyPlacement(v,r),this.hoverState=null;var y=function(){i.$element.trigger("shown.bs."+i.type)};t.support.transition&&this.$tip.hasClass("fade")?o.one(t.support.transition.end,y).emulateTransitionEnd(150):y()}},e.prototype.applyPlacement=function(e,i){var o,r=this.tip(),n=r[0].offsetWidth,s=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),e.top=e.top+a,e.left=e.left+l,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var c=r[0].offsetWidth,p=r[0].offsetHeight;if("top"==i&&p!=s&&(o=!0,e.top=e.top+s-p),/bottom|top/.test(i)){var h=0;e.left<0&&(h=-2*e.left,e.left=0,r.offset(e),c=r[0].offsetWidth,p=r[0].offsetHeight),this.replaceArrow(h-n+c,c,"left")}else this.replaceArrow(p-s,p,"top");o&&r.offset(e)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&o.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,o=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var o=t(this),r=o.data("bs.tooltip"),n="object"==typeof i&&i;(r||"destroy"!=i)&&(r||o.data("bs.tooltip",r=new e(this,n)),"string"==typeof i&&r[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var o=t(this),r=o.data("bs.popover"),n="object"==typeof i&&i;(r||"destroy"!=i)&&(r||o.data("bs.popover",r=new e(this,n)),"string"==typeof i&&r[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(i,o){var r,n=t.proxy(this.process,this);this.$element=t(t(i).is("body")?window:i),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",n),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||(r=t(i).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var i=this;this.$body.find(this.selector).map(function(){var o=t(this),r=o.data("target")||o.attr("href"),n=/^#./.test(r)&&t(r);return n&&n.length&&n.is(":visible")&&[[n[e]().top+(!t.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,o=i-this.$scrollElement.height(),r=this.offsets,n=this.targets,s=this.activeTarget;if(e>=o)return s!=(t=n.last()[0])&&this.activate(t);if(s&&e<=r[0])return s!=(t=n[0])&&this.activate(t);for(t=r.length;t--;)s!=n[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var o=t(this),r=o.data("bs.scrollspy"),n="object"==typeof i&&i;r||o.data("bs.scrollspy",r=new e(this,n)),"string"==typeof i&&r[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a")[0],n=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(n),!n.isDefaultPrevented()){var s=t(o);this.activate(e.parent("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,i,o){function r(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),o&&o()}var n=i.find("> .active"),s=o&&t.support.transition&&n.hasClass("fade");s?n.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),n.removeClass("in")};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var o=t(this),r=o.data("bs.tab");r||o.data("bs.tab",r=new e(this)),"string"==typeof i&&r[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){"use strict";var e=function(i,o){this.options=t.extend({},e.DEFAULTS,o),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=t(document).height(),o=this.$window.scrollTop(),r=this.$element.offset(),n=this.options.offset,s=n.top,a=n.bottom;"top"==this.affixed&&(r.top+=o),"object"!=typeof n&&(a=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var l=null!=this.unpin&&o+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=i-a?"bottom":null!=s&&s>=o?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),p=t.Event(c+".bs.affix");this.$element.trigger(p),p.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:i-a-this.$element.height()}))}}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var o=t(this),r=o.data("bs.affix"),n="object"==typeof i&&i;r||o.data("bs.affix",r=new e(this,n)),"string"==typeof i&&r[i]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(jQuery),require.register("application",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("storage"),i.exports=o=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.start=function(){var t=this;return $.get("/api/auth",function(i){return i.auth&&(r.user=i.user),e.__super__.start.apply(t,arguments)})},e}(Chaplin.Application)}),require.register("collections/shotCollection",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=e("models/shot"),i.exports=r=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return a(e,t),_.extend(e.prototype,Chaplin.SyncMachine),e.prototype.model=o,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("request",this.beginSync),this.on("sync",this.finishSync),this.on("error",this.unsync)},e.prototype.parse=function(t){return this.meta=t.meta,t.shots},e.prototype.url="/api/shots",e}(Chaplin.Collection)}),require.register("collections/stationCollection",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=e("models/station"),i.exports=r=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return a(e,t),_.extend(e.prototype,Chaplin.SyncMachine),e.prototype.model=o,e.prototype.url="/api/stations",e}(Chaplin.Collection)}),require.register("controllers/auth/authController",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("storage"),r=e("controllers/base/baseController"),i.exports=o=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments),null==n.user?(n.redirectUrl=window.location.pathname,this.redirectTo("auth_login")):void 0},e}(r)}),require.register("controllers/auth/loginController",function(t,e,i){var o,r,n,s,a,l,c={}.hasOwnProperty,p=function(t,e){function i(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/auth/loginView"),s=e("views/site/siteView"),a=e("storage"),o=e("controllers/base/baseController"),i.exports=r=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.login=function(){return this.view=new n({region:"main",autoRender:!0})},e.prototype.logout=function(){var t=this;return $.post("/api/auth/logout").then(function(){return a.user=null,Chaplin.mediator.publish("loginState",null),t.redirectTo("static#about")})},e}(o)}),require.register("controllers/auth/stationAuthController",function(t,e,i){var o,r,n,s,a,l,c,p,h={}.hasOwnProperty,u=function(t,e){function i(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=e("./authController"),n=e("models/station"),a=e("views/station/edit/stationEditView"),s=e("views/station/create/stationCreateView"),l=e("views/station/rename/stationRenameView"),r=e("views/site/siteView"),i.exports=c=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments),this.reuse("site",r)},e.prototype.edit=function(t){var e=this;return this.model=new n({name:t.name}),this.view=new a({model:this.model,region:"main"}),this.model.fetch().then(function(){return e.view.render()})},e.prototype.create=function(){return this.view=new s({region:"main",autoRender:!0})},e.prototype.rename=function(t){var e=this;return this.model=new n({name:t.name}),this.view=new l({model:this.model,region:"main"}),this.model.fetch().then(function(){return e.view.render()})},e}(o)}),require.register("controllers/base/baseController",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/site/siteView"),r=e("views/site/header/headerView"),i.exports=o=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments),this.reuse("site",n),this.reuse("header",r,{region:"header"})},e}(Chaplin.Controller)}),require.register("controllers/shotsController",function(t,e,i){var o,r,n,s,a,l,c,p,h={}.hasOwnProperty,u=function(t,e){function i(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};c=e("views/site/siteView"),r=e("models/shot"),n=e("collections/shotCollection"),s=e("views/shot/grid/shotGridView"),a=e("views/shot/show/shotView"),o=e("controllers/base/baseController"),i.exports=l=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments)},e.prototype.index=function(){return this.view=new s({region:"main"})},e.prototype.show=function(t){var e=this;return this.model=new r({_id:t.id}),this.view=new a({model:this.model,region:"main"}),this.model.fetch().then(function(){return e.view.render()})},e}(o)}),require.register("controllers/staticController",function(t,e,i){var o,r,n,s,a,l={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/site/siteView"),o=e("views/about/aboutView"),r=e("controllers/base/baseController"),i.exports=s=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments)},e.prototype.about=function(){return this.view=new o({autoRender:!0,region:"main"})},e}(r)}),require.register("controllers/stationsController",function(t,e,i){var o,r,n,s,a,l,c,p,h,u={}.hasOwnProperty,d=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("views/site/siteView"),n=e("/models/station"),s=e("/collections/stationCollection"),l=e("/views/station/list/stationListView"),a=e("/views/station/edit/stationEditView"),c=e("/views/station/show/stationView"),o=e("controllers/base/baseController"),i.exports=p=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.beforeAction=function(){return e.__super__.beforeAction.apply(this,arguments)},e.prototype.index=function(){var t=this;return this.collection=new s,this.view=new l({collection:this.collection,region:"main"}),this.collection.fetch().then(function(){return t.view.render()})},e.prototype.show=function(t){var e=this;return this.model=new n({name:t.name}),this.view=new c({model:this.model,region:"main"}),this.model.fetch().then(function(){return e.view.render()})},e}(o)}),require.register("initialize",function(t,e){var i;e("utils/analytics/yandexMetrika"),i=e("application"),$(function(){return new i({controllerSuffix:"Controller",pushState:!0,routes:e("routes")}),$(window).resize(function(){return Chaplin.mediator.publish("window-resized",$(window).width(),$(window).height())}),$(window).scroll(function(){return $(window).scrollTop()+$(window).height()>=$(document).height()?Chaplin.mediator.publish("window-scrolled-bottom",$(window).width(),$(window).height()):void 0
})})}),require.register("models/shot",function(t,e,i){var o,r,n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};i.exports=o=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return s(e,t),_.extend(e.prototype,Chaplin.SyncMachine),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("request",this.beginSync),this.on("sync",this.finishSync),this.on("error",this.unsync)},e.prototype.idAttribute="_id",e.prototype.urlRoot="/api/shots",e.prototype.print=function(){var t=this;return $.get(""+this.url()+"/queue").done(function(){return t.set("status","queued")})},e}(Chaplin.Model)}),require.register("models/station",function(t,e,i){var o,r,n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};i.exports=o=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.idAttribute="name",e.prototype.urlRoot="/api/stations",e.prototype.rename=function(t,e){var i=this;return $.post(""+this.url()+"/rename",{name:t},function(){return i.set("name",t),e()})},e.prototype.secret=function(t){return $.get(""+this.url()+"/secret",function(e){return t(e.secret)})},e}(Chaplin.Model)}),require.register("routes",function(t,e,i){i.exports=function(t){return t("stations","stations#index"),t("stations/create",{controller:"auth/stationAuth",action:"create",name:"station_create"}),t("stations/:name","stations#show"),t("stations/:name/edit",{controller:"auth/stationAuth",action:"edit",name:"station_edit"}),t("stations/:name/rename",{controller:"auth/stationAuth",action:"rename",name:"station_rename"}),t("auth/login",{controller:"auth/login",action:"login",name:"auth_login"}),t("auth/logout",{controller:"auth/login",action:"logout",name:"auth_logout"}),t("shots","shots#index"),t("shots/:id","shots#show"),t("","static#about")}}),require.register("storage",function(t,e,i){var o;i.exports=o=function(){function t(){}return t}()}),require.register("utils/analytics/yandexMetrika",function(){!function(t,e,i){(e[i]=e[i]||[]).push(function(){try{e.yaCounter24199384=new Ya.Metrika({id:24199384,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,trackHash:!0})}catch(t){}});var o=t.getElementsByTagName("script")[0],r=t.createElement("script"),n=function(){o.parentNode.insertBefore(r,o)};r.type="text/javascript",r.async=!0,r.src=("https:"==t.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==e.opera?t.addEventListener("DOMContentLoaded",n,!1):n()}(document,window,"yandex_metrika_callbacks")}),require.register("views/about/aboutView",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("views/base/base"),i.exports=o=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return a(i,t),_.extend(i.prototype,Chaplin.EventBroker),i.prototype.initialize=function(){return this.subscribeEvent("window-resized",this.onResize),i.__super__.initialize.apply(this,arguments)},i.prototype.dispose=function(){return this.turnSlideshowOff(),i.__super__.dispose.apply(this,arguments)},i.prototype.numberOfSlides=5,i.prototype.slideshowInterval=5e3,i.prototype.slideshowStopped=!1,i.prototype.slideshowHandler=function(){var t,e,i,o;return this.currentSlide=this.currentSlide?(this.currentSlide+1)%this.numberOfSlides+1:_.sample(_.range(1,this.numberOfSlides+1)),i=this.$(".slide.active"),e=this.$(".slide:not(.active)"),t="/images/slideshow/landing-bg-"+this.currentSlide+".png",e.css({"background-image":"url('"+t+"')"}),o=this,$("<img/>").attr("src",t).load(function(){return $(this).remove(),i.removeClass("active"),e.addClass("active"),o.slideshowStopped?void 0:o.timeoutHandle=setTimeout(_.bind(o.slideshowHandler,o),o.slideshowInterval)})},i.prototype.turnSlideshowOff=function(){return this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.intervalHandle=null),this.slideshowStopped=!0},i.prototype.turnSlideshowOn=function(){return this.turnSlideshowOff(),this.slideshowStopped=!1,this.slideshowHandler()},i.prototype.onResize=function(t,e){return this.$(".full-height").height(e)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.turnSlideshowOn(),this.$(".full-height").height($(window).height())},i.prototype.template=e("./aboutView_"),i.prototype.getTemplateData=function(){},i}(r)}),require.register("views/about/aboutView_",function(t,e,i){var o=function(){var t=[];return t.push('<div class="about-view"><div class="fullpage-layer bottommost"></div><div class="fullpage-layer slide first active"></div><div class="fullpage-layer slide second"></div><div class="fullpage-layer fade-overlay"></div><div class="landing text-center"><div class="fake-offset"></div><div class="full-height centered-container"><div class="centered container"><h1 class="big-header">Снимайте,\nпечатайте,<br/>делитесь!</h1><div class="row"><div class="col-md-1"></div><div class="col-md-10"><div class="big-header-subtitle">Представляем независимый проект по печати фотографий из Instagram\n&mdash; <b>StevieWhale</b></div><a'+jade.attr("href",""+jade.url("shots#index"),!0,!1)+' class="wow-button btn btn-lg">Ух ты, как интересно!</a></div><div class="col-md-1"></div></div></div></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/auth/loginView",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/base/base"),r=e("storage"),i.exports=o=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.initialize=function(){return this.delegate("submit",".login-form",this.login)},i.prototype.loginSuccess=function(t){return r.user=t,Chaplin.mediator.publish("loginState",t),Chaplin.utils.redirectTo(null!=r.redirectUrl?{url:r.redirectUrl}:"static#about")},i.prototype.login=function(t){var e,i=this;return t.preventDefault(),e={username:this.$(".login-field").val(),password:this.$(".password-field").val()},$.post("/api/auth/login",e).done(function(t){return i.loginSuccess(t.user)}).fail(function(){return i.$(".login-form").addClass("animated shake"),i.$(".login-form input").prop("disabled",!0),setTimeout(function(){return i.$(".login-form").removeClass("animated shake"),i.$(".login-form input").prop("disabled",!1)},1e3)})},i.prototype.template=e("./loginView_"),i.prototype.getTemplateData=function(){},i}(n)}),require.register("views/auth/loginView_",function(t,e,i){var o=function(){var t=[];return t.push('<form role="form" class="text-center login-form"><h2>Вумпс! Авторизуйтесь</h2><div class="logo-container"><img src="/images/stevie-kid.svg" class="img-responsive"/></div><form action="javascript:void(0)"><div class="form-group form-group-lg"><input type="text" placeholder="Логин" class="login-field form-control"/><input type="password" placeholder="Пароль" class="password-field form-control"/></div><button type="submit" class="login-button btn btn-lg btn-success btn-block">Войти</button></form></form>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/base/base",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jade.url=Chaplin.utils.reverse,jade.markdown=function(){var t;return t=new Showdown.converter,function(e){return null!=e?t.makeHtml(e):void 0}}(),o=e("storage"),jade.auth=function(){return null!=o.user},i.exports=r=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getTemplateFunction=function(){return this.template},e}(Chaplin.View)}),require.register("views/base/collectionView",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("./base"),i.exports=o=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getTemplateFunction=r.prototype.getTemplateFunction,e}(Chaplin.CollectionView)}),require.register("views/shot/grid/item/shotGridItemView",function(t,e,i){var o,r,n,s,a,l={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};s=e("views/base/base"),n=e("storage"),o=e("models/shot"),i.exports=r=function(t){function i(){return a=i.__super__.constructor.apply(this,arguments)}return c(i,t),i.prototype.className="shot-grid-item",i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.delegate("click",".delete-button",this.deleteHandler),this.delegate("click",".print-button",this.printHandler)},i.prototype.deleteHandler=function(){return confirm("Удалить фотографию?")?this.model.destroy({wait:!0}):void 0},i.prototype.printHandler=function(){return confirm("Напечатать фотографию?")?this.model.print():void 0},i.prototype.template=e("./shotGridItemView_"),i.prototype.getTemplateData=function(){return{shot:this.model.attributes}},i}(s)}),require.register("views/shot/grid/item/shotGridItemView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.shot;return e.push('<div class="polaroid"><a'+jade.attr("href",jade.url("shots#show",{id:o._id}),!0,!1)+"><img"+jade.attr("src",""+o.image,!0,!1)+' class="polaroid-photo img-responsive"/><div class="photo-user"><div class="media"><a'+jade.attr("href","http://instagram.com/"+o.instagram.user.username,!0,!1)+' target="_blank" class="pull-left"><img'+jade.attr("src",o.instagram.user.profile_picture,!0,!1)+' width="48" height="48" class="img-circle media-object"/></a><div class="media-body"><a'+jade.attr("href","http://instagram.com/"+o.instagram.user.username,!0,!1)+' target="_blank"><h4 class="media-heading">@'+jade.escape(null==(jade.interp=o.instagram.user.username)?"":jade.interp)+"<small> ("+jade.escape(null==(jade.interp=o.instagram.user.full_name)?"":jade.interp)+")</small></h4></a>"),o.instagram.caption&&e.push(jade.escape(null==(jade.interp=o.instagram.caption.text)?"":jade.interp)),e.push('</div></div></div><div class="photo-info">'),jade.auth()&&e.push('<span class="action-button print-button ion-ios7-printer-outline"></span><span class="action-button delete-button ion-ios7-trash-outline"></span>'),e.push("</div></a></div>"),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/shot/grid/shotGridView",function(t,e,i){var o,r,n,s,a,l,c={}.hasOwnProperty,p=function(t,e){function i(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("./item/shotGridItemView"),o=e("views/base/collectionView"),a=e("views/base/base"),r=e("collections/shotCollection"),i.exports=s=function(t){function i(){return l=i.__super__.constructor.apply(this,arguments)}return p(i,t),_.extend(i.prototype,Chaplin.EventBroker),i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.render(),this.collection=new r,this.subscribeEvent("window-scrolled-bottom",this.loadNextPortion),this.loadNextPortion()},i.prototype.className="shot-grid-view",i.prototype.template=e("./shotGridView_"),i.prototype.loading=!1,i.prototype.showLoader=function(){return this.$(".load-spinner").fadeIn(100)},i.prototype.hideLoader=function(){return this.$(".load-spinner").fadeOut(100)},i.prototype.loadNextPortion=function(){var t,e=this;if(!(this.loading||null!=this.collection.meta&&this.collection.meta.count>=this.collection.meta.total))return this.loading=!0,this.showLoader(),t={},this.collection.isEmpty()||(t.max_timestamp=_.min(this.collection.map(function(t){return moment(t.attributes.created).unix()}))),this.collection.fetch({data:t,error:function(){return e.loading=!1,e.hideLoader()},success:function(t){var i;return e.loading=!1,e.hideLoader(),i=t.map(function(t){var i;return i=new n({model:t}),i.render(),i.el,imagesLoaded(i.el).on("always",function(){return e.$(".shot-grid").append(i.el),e.masonry.appended(i.el),setTimeout(function(){return i.$el.addClass("shown")},_.random(10,400)),e.masonry.layout()})})}})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.masonry=new Masonry(this.$(".shot-grid")[0],{columnWidth:".shot-grid-item",itemSelector:".shot-grid-item",transitionDuration:0})},i}(a)}),require.register("views/shot/grid/shotGridView_",function(t,e,i){var o=function(){var t=[];return t.push('<div class="shot-grid-view"><div class="container"><div class="shot-grid"></div><div class="text-center"><div class="load-spinner"><i class="icon ion-loading-c"></i></div></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/shot/show/shotView",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("views/base/base"),i.exports=o=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.template=e("./shotView_"),i.prototype.getTemplateData=function(){return{shot:this.model.attributes}},i}(r)}),require.register("views/shot/show/shotView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.shot;switch(e.push('<div class="container"><div class="row shot-single-view"><div class="col-lg-4 col-md-5 col-xs-8"><div class="shot-grid-item"><div class="polaroid"><a'+jade.attr("href",o.instagram.link,!0,!1)+' target="_blank"><img'+jade.attr("src",""+o.image,!0,!1)+' class="polaroid-photo img-responsive"/></a><div class="photo-user"><div class="media"><a'+jade.attr("href","http://instagram.com/"+o.instagram.user.username,!0,!1)+' target="_blank" class="pull-left"><img'+jade.attr("src",o.instagram.user.profile_picture,!0,!1)+' width="48" height="48" class="img-circle media-object"/></a><div class="media-body"><a'+jade.attr("href","http://instagram.com/"+o.instagram.user.username,!0,!1)+' target="_blank"><h4 class="media-heading">@'+jade.escape(null==(jade.interp=o.instagram.user.username)?"":jade.interp)+"<small> ("+jade.escape(null==(jade.interp=o.instagram.user.full_name)?"":jade.interp)+")</small></h4></a>"),o.instagram.caption&&e.push(jade.escape(null==(jade.interp=o.instagram.caption.text)?"":jade.interp)),e.push('</div></div></div></div></div></div><div class="col-lg-8 col-md-7 col-xs-12">'),o.status){case"printed":e.push("<h3>Как забрать фотографию со станции &laquo;<a"+jade.attr("href",jade.url("stations#show",{name:o.printedOn.name}),!0,!1)+">"+jade.escape(null==(jade.interp=o.printedOn.title)?"":jade.interp)+'</a>&raquo;?</h3><div class="markdown">'+(null==(jade.interp=jade.markdown(o.printedOn.instructions))?"":jade.interp)+"</div>");break;default:e.push("<h3>Фотография еще не была напечатана</h3>")}return e.push("</div></div></div>"),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/site/header/headerView",function(t,e,i){var o,r,n,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("views/base/base"),i.exports=o=function(t){function i(){return this.onDispatch=s(this.onDispatch,this),this.onLoginChanged=s(this.onLoginChanged,this),n=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.template=e("./headerView_"),i.prototype.className="header-view-container",i.prototype.initialize=function(){return Chaplin.mediator.subscribe("dispatcher:dispatch",this.onDispatch),Chaplin.mediator.subscribe("loginState",this.onLoginChanged),this.delegate("click","li a",function(){}),i.__super__.initialize.apply(this,arguments)},i.prototype.onLoginChanged=function(){return this.render()},i.prototype.onDispatch=function(t,e,i){var o;return o=i.controller.split("/")[0],this.$(".site-navigation li.selected").removeClass("selected"),this.$(".site-navigation li.nav-"+o).addClass("selected"),"static"===o?this.$el.addClass("static-page"):this.$el.removeClass("static-page")},i}(r)}),require.register("views/site/header/headerView_",function(t,e,i){var o=function(){var t=[];return t.push('<nav class="site-navigation navbar navbar-static-top"><div class="container"><div class="navbar-header"><button data-toggle="collapse" data-target="#navbar-collapsing-menu" class="navbar-toggle"><span class="navicon ion-navicon-round"></span><span class="sr-only">Toggle navigation</span></button></div><div id="navbar-collapsing-menu" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-left"><li class="nav-static"><a'+jade.attr("href",jade.url("static#about"),!0,!1)+'> О проекте</a></li><li class="nav-stations"><a'+jade.attr("href",""+jade.url("stations#index"),!0,!1)+'> Печатные станции</a></li><li class="nav-shots"><a'+jade.attr("href",""+jade.url("shots#index"),!0,!1)+'> Фотографии</a></li></ul><ul class="nav navbar-nav navbar-right">'),t.push(jade.auth()?"<li><a"+jade.attr("href",""+jade.url("auth_logout"),!0,!1)+"> выйти</a></li>":'<li><a data-toggle="collapse" data-target="#navbar-collapse-toggle"'+jade.attr("href",""+jade.url("auth_login"),!0,!1)+"> войти</a></li>"),t.push("</ul></div></div></nav>"),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/site/siteView",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("views/base/base"),i.exports=o=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.container="body",i.prototype.id="site-container",i.prototype.regions={main:"#main-container",header:"#header-container"},i.prototype.template=e("./siteView_"),i}(r)}),require.register("views/site/siteView_",function(t,e,i){var o=function(){var t=[];return t.push('<div id="header-container"></div><div class="container-fluid site-container"><div id="main-container"></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/create/stationCreateView",function(t,e,i){var o,r,n,s,a,l={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};s=e("views/base/base"),o=e("models/station"),r=e("collections/stationCollection"),i.exports=n=function(t){function i(){return a=i.__super__.constructor.apply(this,arguments)}return c(i,t),i.prototype.initialize=function(){return this.delegate("click",".register-button",this.register)},i.prototype.register=function(){var t,e;return t={title:this.$(".title-input").val(),subtitle:this.$(".subtitle-input").val()},e=new o(t),e.save(null,{success:function(){return Chaplin.utils.redirectTo("stations#index")}})},i.prototype.template=e("./stationCreateView_"),i.prototype.getTemplateData=function(){},i}(s)}),require.register("views/station/create/stationCreateView_",function(t,e,i){var o=function(){var t=[];return t.push('<div class="container"><h1>Регистрация станции</h1><div role="form" class="form"><div class="form-group"><input type="text" placeholder="Название" class="title-input form-control"/></div><div class="form-group"><input type="text" placeholder="Подзаголовок" class="subtitle-input form-control"/></div><div class="row"><div class="col-md-4 col-md-offset-4"><div class="register-button btn btn-primary btn-lg btn-block save-button">Зарегистрировать</div></div></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/edit/stationEditView",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/base/base"),o=e("models/station"),i.exports=r=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.model=o,i.prototype.template=e("./stationEditView_"),i.prototype.initialize=function(){return this.delegate("click",".save-button",this.save)},i.prototype.save=function(){var t,e=this;return t={title:this.$(".title-input").val(),subtitle:this.$(".subtitle-input").val(),description:this.$(".desc-input").val(),instructions:this.$(".instructions-input").val()},this.model.save(t,{success:function(){return Chaplin.utils.redirectTo("stations#show",{name:e.model.attributes.name})}})},i.prototype.getTemplateData=function(){return{station:this.model.attributes}},i}(n)}),require.register("views/station/edit/stationEditView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.station;return e.push('<div class="container"><h1>Редактировать станцию</h1><div role="form" class="form">   <div class="form-group"><label>Название</label><input type="text"'+jade.attr("value",o.title,!0,!1)+' class="title-input form-control"/></div><div class="form-group"><label>Подзаголовок</label><input type="text"'+jade.attr("value",o.subtitle,!0,!1)+' class="subtitle-input form-control"/></div><div class="form-group"><label>Как забрать фотографию? <small>(Поддерживает Markdown)</small></label><textarea rows="6"'+jade.attr("text",o.description,!0,!1)+' class="instructions-input form-control">'+jade.escape(null==(jade.interp=o.instructions)?"":jade.interp)+'</textarea></div><div class="form-group"><label>Описание <small>(Поддерживает Markdown)</small></label><textarea rows="12"'+jade.attr("text",o.description,!0,!1)+' class="desc-input form-control">'+jade.escape(null==(jade.interp=o.description)?"":jade.interp)+'</textarea></div><div class="row"><div class="col-md-4 col-md-offset-4"><div class="login-button btn btn-primary btn-lg btn-block save-button">Сохранить</div></div></div></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/list/stationListItemView",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/base/base"),r=e("storage"),i.exports=o=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.template=e("./stationListItemView_"),i.prototype.getTemplateData=function(){return{station:this.model.attributes}},i}(n)}),require.register("views/station/list/stationListItemView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.station;switch(e.push('<div class="station-item"><h3><a'+jade.attr("href",jade.url("stations#show",{name:o.name}),!0,!1)+">"+jade.escape(null==(jade.interp=o.title)?"":jade.interp)+"</a> "),o.online){case!0:e.push('<span class="label label-success">Онлайн</span>');break;default:e.push('<span class="label label-warning">Оффлайн</span>')}return e.push('</h3><p class="lead">'+jade.escape(null==(jade.interp=o.subtitle)?"":jade.interp)+"</p></div>"),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/list/stationListView",function(t,e,i){var o,r,n,s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=e("./stationListItemView"),i.exports=r=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.animationDuration=300,i.prototype.itemView=o,i.prototype.listSelector=".station-list",i.prototype.loadingSelector=".loading-container",i.prototype.template=e("./stationListView_"),i.prototype.getTemplateData=function(){},i.prototype.getTemplateFunction=function(){return this.template},i}(Chaplin.CollectionView)}),require.register("views/station/list/stationListView_",function(t,e,i){var o=function(){var t=[];return t.push('<div class="container navbar-shift"><div class="row"><div class="col-md-12">'),jade.auth()&&t.push("<a"+jade.attr("href",jade.url("station_create"),!0,!1)+' class="btn btn-success"><i class="fa fa-plus"></i> Зарегистрировать</a>'),t.push('<div class="loading-container"><h2>Загрузка</h2></div><div class="station-list"></div></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/rename/stationRenameView",function(t,e,i){var o,r,n,s,a,l={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};s=e("views/base/base"),o=e("models/station"),r=e("collections/stationCollection"),i.exports=n=function(t){function i(){return a=i.__super__.constructor.apply(this,arguments)}return c(i,t),i.prototype.initialize=function(){return this.delegate("click",".rename-button",this.rename),this.delegate("click",".cancel-button",this.cancel)},i.prototype.rename=function(){var t,e=this;return t=$(".name-input").val(),this.model.rename(t,function(){return e.cancel()})},i.prototype.cancel=function(){return Chaplin.utils.redirectTo("stations#show",{name:this.model.get("name")})},i.prototype.template=e("./stationRenameView_"),i.prototype.getTemplateData=function(){return{station:this.model.attributes}},i}(s)}),require.register("views/station/rename/stationRenameView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.station;return e.push('<div class="container"><div class="row text-center"><h1>Сменить URL станции</h1><div class="col-md-4 col-md-offset-4"><div role="form" class="form"><div class="form-group"><input type="text"'+jade.attr("value",o.name,!0,!1)+' placeholder="Название" class="name-input form-control"/></div><div class="form-group"><div class="rename-button btn btn-success btn-block btn-lg">Поменять</div><div class="cancel-button btn btn-default btn-block btn-lg">Отмена</div></div></div></div></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof i&&i&&i.exports&&(i.exports=o)}),require.register("views/station/show/stationView",function(t,e,i){var o,r,n,s,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=e("views/base/base"),o=e("models/station"),i.exports=r=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.model=o,i.prototype.initialize=function(){return this.delegate("click",".delete-confirm-button",this.deleteStation),this.delegate("click",".secret-button",this.showSecret)},i.prototype.deleteStation=function(){return this.$(".delete-modal").modal("hide"),this.model.destroy({success:function(){return Chaplin.utils.redirectTo("stations#index")}})},i.prototype.showSecret=function(){var t=this;return this.model.secret(function(e){return t.$(".secret-modal .secret-field").text(e),t.$(".secret-modal").modal("show")})},i.prototype.template=e("./stationView_"),i.prototype.render=function(){var t,e,o,r;return i.__super__.render.apply(this,arguments),t=this.$(".video-canvas")[0],e=t.getContext("2d"),o="Прямой эфир выключен",this.model.get("streaming")&&(o="Живая трансляция станции"),this.$(".tooltip-button").tooltip({placement:"top",title:o}),this.model.get("streaming")?(r="ws://"+window.location.hostname+":3030/"+this.model.attributes.name,this.client=new WebSocket(r),this.player=new jsmpeg(this.client,{canvas:t})):void 0},i.prototype.getTemplateData=function(){return{station:this.model.attributes}},i}(n)}),require.register("views/station/show/stationView_",function(t,e,i){var o=function(t){var e=[],i=t||{},o=i.station;switch(e.push('<div class="container"><div class="station-item"><h1>'+jade.escape(null==(jade.interp=o.title)?"":jade.interp)+"&nbsp;"),o.online){case!0:e.push('<span class="label label-success">Онлайн</span>');break;default:e.push('<span class="label label-warning">Оффлайн</span>')}return e.push("<h2>"),jade.auth()&&e.push('<div class="btn-group btn-group-sm"><button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><i class="fa fa-gear"></i> <span class="caret"></span></button><ul role="menu" class="dropdown-menu"><li><a'+jade.attr("href",jade.url("station_edit",{name:o.name}),!0,!1)+' class="edit-button"><i class="fa fa-edit"></i> Редактировать</a></li><li><a'+jade.attr("href",jade.url("station_rename",{name:o.name}),!0,!1)+' class="edit-button"><i class="fa fa-cloud"></i> Сменить URL</a></li><li><a href="#" class="secret-button"><i class="fa fa-asterisk"></i> Показать пароль</a></li><li><a href="#" data-toggle="modal" data-target=".delete-modal" class="delete-button"><i class="fa fa-trash-o"></i> Удалить</a></li></ul></div>'),e.push("        <small>"+jade.escape(null==(jade.interp=o.subtitle)?"":jade.interp)+'</small></h2></h1><div class="station-info row"><div class="video-streaming col-md-4"><canvas width="240" height="240" data-toggle="tooltip" class="video-canvas tooltip-button"></canvas></div><div class="station-title col-md-8"><h3>Как забирать фотографии с этой станции?</h3><div class="markdown">'+(null==(jade.interp=jade.markdown(o.instructions))?"":jade.interp)+'</div></div></div><div class="markdown">'+(null==(jade.interp=jade.markdown(o.description))?"":jade.interp)+'</div></div><div tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" class="modal delete-modal"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Удалить станцию?</h4></div><div class="modal-body">Внимательно подумайте перед удалением станции, возможно, она вам \nеще пригодится! </div><div class="modal-footer text-center"><button class="delete-confirm-button btn btn-primary">Да!</button><button data-dismiss="modal" class="btn btn-default">Нет, я передумал.</button></div></div></div></div><div class="modal secret-modal"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Пароль станции</h4></div><div class="modal-body text-center"><p>Используйте этот пароль для подключения агента печатной станции:</p><h2 class="secret-field"></h2></div><div class="modal-footer text-center"><button data-dismiss="modal" class="btn btn-success">ОК</button></div></div></div></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o
}):"object"==typeof i&&i&&i.exports&&(i.exports=o)});